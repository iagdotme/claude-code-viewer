# syntax=docker/dockerfile:1.7

# Development Dockerfile with hot reload support
FROM node:22-slim

# Install pnpm and system dependencies
ENV PNPM_HOME=/usr/local/share/pnpm
ENV PATH=${PNPM_HOME}:${PATH}
# Auto-accept corepack downloads without prompting
ENV COREPACK_ENABLE_DOWNLOAD_PROMPT=0

RUN corepack enable pnpm && apt-get update && apt-get install -y git openssh-client && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# We'll mount the source code, so just set up the environment
ENV NODE_ENV=development
ENV PORT=3400

EXPOSE 3400

# Default command - will be overridden in docker-compose
CMD ["pnpm", "dev"]
